# 数据库必会面试题
## 1.  请解释数据库中的MVCC（多版本并发控制）机制，并说明其在MySQL InnoDB中的具体实现方式？
MVCC是一种通过维护数据的历史版本实现高并发的技术，允许读操作不阻塞写操作，写操作不阻塞读操作。在MySQL InnoDB中，MVCC通过以下机制实现：
1. 隐藏字段：每行数据包含DB_TRX_ID（最近修改的事务ID）和DB_ROLL_PTR（回滚指针，指向Undo Log记录）。
2. Undo Log：存储数据的历史版本，用于构建一致性读视图。
3. Read View：事务执行快照读时生成，包含当前活跃事务ID列表，用于判断数据版本的可见性。

- 示例场景：
    * 事务A（ID=100）更新某行数据，生成新版本并写入Undo Log。
    * 事务B（ID=101）启动并执行查询，此时生成Read View，活跃事务为[100]。
    * 事务B读取该行时，发现最新版本的DB_TRX_ID=100在活跃事务列表中，故通过DB_ROLL_PTR找到上一个可见版本返回。
    
关键点：解决了“不可重复读”和“幻读”问题（在RR隔离级别下）。仅在RC（读已提交）和RR（可重复读）隔离级别生效。

## 2. 如何处理数据库死锁？请结合MySQL说明检测与解决机制。
死锁产生条件：互斥、持有并等待、不可抢占、循环等待。
MySQL处理方式：
>检测机制：使用等待图（Wait-for Graph）检测循环依赖，超时（默认50秒）后触发检测。\
>解决策略：选择代价最小的事务回滚（通过计算事务修改的行数、Undo Log大小等）。


## 3. 请解释分库分表的常见策略及其优缺点，并说明如何解决跨分片查询问题。


## 4. 请详细说明MySQL的Redo Log、Undo Log和Binlog的区别与作用。


## 5. 请阐述数据库的“幻读”现象，MySQL如何通过Next-Key Lock解决幻读？



## 6. 请描述数据库的“写倾斜”（Write Skew）问题，并给出解决方案。


## 7. 什么是数据库事务，它的ACID属性是什么？


## 8. 请解释一下数据库索引的作用和优缺点。



## 9. 索引失效的情况




## 10. 什么是数据库范式化，为什么要进行范式化设计？


## 11. 请解释一下数据库连接池的作用和优点。



## 12. 什么是数据库锁，MySQL中有哪些类型的锁？



## 13. 行级锁和表级锁


## 14. 解释一下数据库事务隔离级别，并说明它们之间的区别。



## 15. 说一下存储引擎（Partitioning）



## 16. MySQL数据库如何做索引优化？


## 17. 如何对MySQL做性能调优，可以从哪些角度来考虑？



## 18. 如何保证数据库和缓存的双写一致性，请给我具体的方案。


